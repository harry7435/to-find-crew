# 게임 인원 관리 페이지 구현 계획

## Context

기존 배드민턴 번개 모임(Supabase 기반)과 별개로, 현장에서 빠르게 사용할 수 있는 **로컬 전용 게임 인원 관리 페이지**를 만든다. 서버 저장 없이 localStorage만 사용하여 MVP를 빠르게 구현한다.

## 데이터 모델 (localStorage)

```typescript
interface Player {
  id: string;              // crypto.randomUUID()
  name: string;
  gender: 'male' | 'female';
  skillLevel: 'S' | 'A' | 'B' | 'C' | 'D' | 'E';
}

interface GameRecord {
  id: string;
  teamA: [string, string]; // player IDs
  teamB: [string, string]; // player IDs
  confirmedAt: string;     // ISO date
}
```

- `game-manager-players` → `Player[]`
- `game-manager-games` → `GameRecord[]`
- 페어 횟수는 GameRecord[]에서 계산 (별도 저장 불필요)

## 생성할 파일 (6개)

### 1. `src/hooks/useGameManager.ts` — localStorage 커스텀 훅
- players, games 상태 관리
- addPlayer, removePlayer, addGame, resetPlayers, resetGames
- mount 시 localStorage에서 읽기, 변경 시 자동 저장
- JSON 파싱 에러 시 빈 배열로 초기화

### 2. `src/components/game-manager/PlayerForm.tsx` — 선수 등록 폼
- React Hook Form + Zod (기존 UserInfoModal 패턴 따름)
- 필드: 이름(Input), 성별(select: 남성/여성), 급수(select: S~E)
- 등록 후 폼 초기화 + 이름 필드 포커스

### 3. `src/components/game-manager/PlayerList.tsx` — 선수 목록
- 각 선수: 이름, 성별 아이콘, 급수 Badge, 게임 수, 삭제 버튼
- 급수별 Badge 색상 (S=red, A=orange, B=yellow, C=blue, D=green, E=gray)
- 빈 상태 메시지 표시

### 4. `src/components/game-manager/TeamPicker.tsx` — 랜덤 팀 뽑기
- Fisher-Yates 셔플로 4명 선택 → 2:2 분배
- 뽑기 전: "랜덤 뽑기" 버튼 (4명 미만 시 disabled)
- 뽑기 후: Team A / Team B 카드 표시 + "확정" / "다시 뽑기" 버튼
- framer-motion으로 카드 등장 애니메이션

### 5. `src/components/game-manager/GameHistory.tsx` — 게임 기록 + 통계
- 게임 리스트: Game #, 시간, Team A vs Team B
- 선수별 게임 수 표시
- 페어 통계: "선수A & 선수B: X회" (빈도 내림차순)
- Tabs 컴포넌트로 게임 기록 / 통계 분리

### 6. `src/app/game-manager/page.tsx` — 메인 페이지
- 섹션 순서: 헤더 → 선수 등록 → 선수 목록 → 팀 뽑기 → 게임 기록 → 초기화
- 초기화 버튼 2개: "게임 기록 초기화" / "선수 목록 초기화" (confirm 확인)
- 선수 초기화 시 게임 기록도 함께 삭제

## 구현 순서

1. `useGameManager.ts` 훅 (데이터 레이어)
2. `PlayerForm.tsx` + `PlayerList.tsx` (선수 관리)
3. `page.tsx` 스켈레톤 (선수 관리까지 동작 확인)
4. `TeamPicker.tsx` (핵심 기능)
5. `GameHistory.tsx` (기록 + 통계)
6. 초기화 기능 + 홈페이지 링크 추가

## 홈페이지 연결

`src/app/page.tsx`에 "게임 관리" 카드 추가 (기존 번개 생성/참가 카드와 같은 그리드)

## 기존 코드 재사용

| 패턴 | 참고 파일 |
|------|-----------|
| 폼 검증 (RHF + Zod) | `src/components/badminton/UserInfoModal.tsx` |
| 성별/급수 select | `src/components/badminton/UserInfoModal.tsx` |
| 페이지 레이아웃 | `src/app/badminton/[id]/page.tsx` |
| Card 구조 | `src/app/page.tsx` |
| Badge 색상 | `src/components/badminton/ParticipantsList.tsx` |
| 애니메이션 | `src/app/random-picker/page.tsx` |

## 검증 방법

1. `pnpm dev`로 개발 서버 실행
2. `/game-manager` 접속하여 전체 플로우 테스트:
   - 선수 4명 이상 등록 → 랜덤 뽑기 → 확정 → 기록 확인 → 통계 확인
3. 페이지 새로고침 후 데이터 유지 확인
4. 초기화 기능 테스트
5. `pnpm lint`로 코드 품질 확인
6. `pnpm build`로 빌드 성공 확인
